<!DOCTYPE html>
<html>
    <head>
        <link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
        <meta charset="UTF-8">
        <title> Traffic </title>
    </head>
    <body style="margin: 0;">
        <div id="main"></div>
        <script src="Out/Main.js"></script>
        <script>

var node = document.getElementById("main")
var defaultControls = { 
    up: 87, // W
    left: 65, // A
    right: 68, // D
    break: 83, // S
    back: 88, // X
    carUp: 39, // Right
    carDown: 37, // Left
    free: 27, // Escape
    zoomIn: 187, // Plus
    zoomOut: 189, // Minus
    remove: 8, // Backspace
    place: 13, // Enter
    snap: 16, // Shift
}
var query = location.search.substr(1)
var result = {}
query.split("&").forEach(function(part) {
    var item = part.split("=");
    result[item[0]] = decodeURIComponent(item[1])
});
Object.keys(defaultControls).forEach(control => {
    if (result[control] !== undefined) {
        defaultControls[control] = result[control] | 0
    }
})

var app = Elm.Main.embed(node, {webSocketUrl: "ws://" + document.location.hostname + ":" + document.location.port + "/cars", controls: defaultControls})



        </script>
    </body>
</html>